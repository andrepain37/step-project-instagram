{"version":3,"sources":["theme/Logo.js","store/posts/operations.js","store/posts/actions.js","store/modals/operations.js","store/modals/actions.js","store/user/actions.js","components/Header.js","store/user/operations.js","store/subs/actions.js","validation/reg-exp.js","validation/register/schema.js","components/Input.js","modals/RegisterForm.js","validation/login/schema.js","modals/LoginForm.js","modals/UploadPost.js","modals/UploadUserAvatar.js","validation/comments/schema.js","components/Comments.js","components/Post.js","components/Loader.js","theme/loader.jsx","modals/PostDetails.js","modals/index.js","store/subs/operations.js","components/Sub.js","components/SubsList.js","components/RecSubsList.js","theme/useBreakpoint.js","pages/HomePosts.js","components/GridListPhoto.js","components/BodyGridUser.js","components/HeaderUser.js","pages/UserPage.js","AppRoutes.js","App.js","store/posts/reducer.js","store/user/reducer.js","store/modals/reducer.js","store/subs/reducer.js","store/reducer.js","store/store.js","index.js"],"names":["Logo","className","loadPosts","dispatch","getState","posts","page","hasMore","axios","post","then","res","data","type","payload","savePosts","concat","saveHasMore","activatePostDetails","postId","loadOnePost","sendLog","user_info","Header","useDispatch","useEffect","user","isAuth","withCredentials","useState","anchorEl","setAnchorEl","handleClose","isLogin","useSelector","st","to","_id","Avatar","aria-label","src","image","nickname","Menu","id","keepMounted","open","onClose","MenuItem","onClick","Button","aria-controls","aria-haspopup","event","currentTarget","MoreHoriz","emailRegExp","FIELD_REQUIRED","schema","yup","shape","required","min","max","email","matches","password","repeat","oneOf","Input","props","label","name","classes","rest","useField","field","meta","TextField","error","touched","helperText","connect","sendReg","values","setError","key","alertify","all_modals","modals","success","sendRegister","withFormik","mapPropsToValues","handleSubmit","sendData","setFieldError","validationSchema","Paper","noValidate","autoComplete","color","sendLogin","UploadPost","file","setFile","setImage","fileInput","useRef","current","click","variant","startIcon","CloudUpload","ref","style","display","onChange","e","img_src","window","URL","createObjectURL","target","files","Send","formData","FormData","append","headers","uploadImage","alt","UploadUserAvatar","sendSettingImage","add_comment","sendComment","comment","resetValue","newComment","commentPost","resetForm","lastComments","isAllComments","scroll","isloadAllComments","setIsLoadAllComments","commentsRow","scrollComments","scrollTop","scrollHeight","comments","map","length","getComments","require","useStyles","makeStyles","theme","opacity","transform","card","marginBottom","media","height","paddingTop","cursor","like","transition","likeOnBg","position","top","left","pointerEvents","likeOnBgActive","animation","likeActive","content","padding","formodal","flex","alignItems","Post","likes","liked","children","date","props_classes","formatDate","Moment","format","React","setLike","likeBg","setLikeBg","countLike","setCountLike","interval","setInterval","clearInterval","togglecountLike","isLike","avatar","avatarComponent","Card","join","CardHeader","title","subheader","CardContent","CardMedia","onDoubleClick","IconButton","clsx","CardActions","disableSpacing","aria-expanded","Loader","viewBox","preserveAspectRatio","cx","cy","r","strokeWidth","stroke","strokeDasharray","fill","strokeLinecap","attributeName","dur","repeatCount","keyTimes","strokeDashoffset","wrap","breakpoints","down","flexDirection","wrapComments","PostDetails","isLoading","setIsLoading","postDetails","activePostDetails","paper","background","boxShadow","shadows","spacing","width","Modals","modalsActive","active","register","login","uploadPost","uploadUserAvatar","styles","maxWidth","maxHeight","delPost","Modal","memo","subscribeAction","userId","isSub","setSub","subAction","button","minWidth","link","Sub","textSub","iconSub","togglePoint","isSubs","setIsSub","ListItem","ListItemAvatar","ListItemText","primary","ListItemSecondaryAction","root","backgroundColor","palette","border","overflowX","SubsList","user_subs","subs","isLoadingSub","mySubs","value","Typography","List","dense","RecSubsList","recomends_subs","isLoadingRec","subsRecomend","useBreakpoint","queries","queryMatch","setQueryMatch","mediaQueryLists","keys","Object","isAttached","handleQueryListener","updatedMatches","reduce","acc","matchMedia","forEach","addListener","removeListener","HomePosts","allPosts","i","lastComment","matchPoints","dataLength","next","endMessage","loader","toggle","GridListPhoto","GridListTile","flexWrap","justifyContent","img","list","details","zIndex","fontSize","BodyGridUser","userPosts","setUserPosts","getUserPosts","a","cols","GridList","header","second","marginLeft","HeaderUser","userInfo","setUserInfo","getUserInfo","UserPage","match","params","toggleCols","ProtectedRoute","authenticated","AppRoutes","exact","path","render","App","Container","initialState","state","action","selectedFile","refreshCommentsPost","newPost","refreshPost","push","localStorage","getItem","setItem","removeItem","combineReducers","store","createStore","reducer","compose","applyMiddleware","thunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.58a9f5f6.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Logo() {\r\n    return (\r\n        <div className=\"logo\">\r\n            <span className=\"logo-left logo-side\">Mono</span>\r\n            <span className=\"logo-right logo-side\">Photos</span>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Logo;","import alertify from 'alertifyjs';\r\nimport axios from 'axios';\r\nimport { saveHasMore, saveLastComment, savePosts, saveAllComments, activatePost } from './actions';\r\n\r\nexport const loadPosts = () => (dispatch, getState) => {\r\n\r\n    const {posts, page, hasMore} = getState().posts\r\n\r\n    if (hasMore) {\r\n        axios.post(\"/posts\", {page}).then((res) => {\r\n            if (!!res.data) {\r\n                dispatch(savePosts(posts.concat(res.data)));\r\n            }else{\r\n                dispatch(saveHasMore(false))\r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n\r\nexport const loadOnePost = (postId) => (dispatch, getState) => {\r\n\r\n\r\n    axios.post(\"/posts/one\", {postId}).then((res) => {\r\n        if (!!res.data) {\r\n            dispatch(activatePost(res.data));\r\n        }\r\n    });\r\n    \r\n    \r\n}\r\n\r\nexport const uploadImage = (file) => () => {\r\n    \r\n    let formData = new FormData();\r\n    formData.append(\"image_upload\", file);\r\n\r\n    axios.post(\"/posts/create\", formData, {\r\n        headers: {\r\n            'Content-Type': 'multipart/form-data;boundary=1'\r\n        }\r\n    }).then((res) => {\r\n\r\n        if (!!res.data) {\r\n            if(!!res.data['success']){\r\n                alertify.success(res.data['success']);\r\n            }\r\n        }\r\n\r\n    });\r\n}\r\n\r\nexport const likePost = (postId, isLike) => (dispatch, getState) => {\r\n\r\n    const {isLogin} = getState().user\r\n\r\n    if (!isLogin) {\r\n        alertify.error('Вы не вошли в аккаунт!');\r\n\r\n    }else{\r\n        axios.post(\"/posts/like\", {postId, isLike}).then((res) => {\r\n\r\n            if (!!res.data) {\r\n                if(!!res.data['error']){\r\n                    alertify.error(res.data['error']);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const commentPost = ({postId, comment, resetValue}) => (dispatch, getState) => {\r\n\r\n    const {isLogin, user_info} = getState().user\r\n\r\n    if (!isLogin) {\r\n        alertify.error('Вы не вошли в аккаунт');\r\n    }else{\r\n        axios.post(\"/posts/comment\", {postId, comment}).then((res) => {\r\n\r\n            if (!!res.data) {\r\n                if(!!res.data['success']){\r\n                    alertify.success(res.data['success']);\r\n                    dispatch(saveLastComment(\r\n                        {postId, newComment: {\r\n                            comment, name: user_info.nickname, id: res.data.id\r\n                        }}\r\n                    ));\r\n                    resetValue();\r\n                }\r\n                if(!!res.data['error']){\r\n                    alertify.error(res.data['error']);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const getComments = (postId) => (dispatch) => {\r\n\r\n    axios.post(\"/posts/comments\", {postId}).then((res) => {\r\n\r\n        if (!!res.data) {\r\n            if(!!res.data['comments']){\r\n                dispatch(saveAllComments({\r\n                    comments: res.data['comments'], postId\r\n                }));\r\n\r\n            }\r\n        }\r\n    });\r\n    \r\n}\r\n","\r\nexport const savePosts = (posts) => ({\r\n    type: 'LOAD_POSTS',\r\n    payload: posts\r\n})\r\n\r\nexport const prepareUploadFile = (posts) => ({\r\n    type: 'PREPARE_UPLOAD_IMAGE',\r\n    payload: posts\r\n})\r\n\r\nexport const uploadFile = (posts) => ({\r\n    type: 'UPLOAD_IMAGE',\r\n    payload: posts\r\n})\r\n\r\nexport const saveLastComment = (payload) => ({\r\n    type: 'SAVE_LAST_COMMENT',\r\n    payload\r\n})\r\n\r\nexport const saveHasMore = (hasMore) => ({\r\n    type: 'SAVE_HAS_MORE',\r\n    payload: hasMore\r\n})\r\n\r\nexport const saveAllComments = (payload) => ({\r\n    type: 'SAVE_ALL_COMMENTS',\r\n    payload\r\n})\r\n\r\nexport const deletePosts = () => ({\r\n    type: 'DELETE_POSTS'\r\n})\r\n\r\nexport const activatePost = (payload) => ({\r\n    type: 'ACTIVATE_POST',\r\n    payload\r\n})\r\n\r\nexport const delActivatePost = () => ({\r\n    type: 'DEL_ACTIVATE_POST'\r\n})\r\n","import {loadOnePost} from '../posts/operations';\r\nimport { closeAll, activeRegister, activeLogin, activeUploadPost, activeUploadUserAvatar, activePostDetails } from './actions';\r\n\r\nexport const closeAllModals = () => (dispatch, getState) => {\r\n\r\n    const all_modals = getState().modals\r\n\r\n    for (const key in all_modals) {\r\n        all_modals[key] = false;\r\n    }\r\n\r\n    dispatch(closeAll(all_modals));\r\n}\r\n\r\nexport const activateRegister = () => (dispatch) => {\r\n\r\n    dispatch(activeRegister());\r\n}\r\n\r\nexport const activateUploadPost = () => (dispatch) => {\r\n\r\n    dispatch(activeUploadPost());\r\n}\r\n\r\nexport const activateLogin = () => (dispatch) => {\r\n\r\n    dispatch(activeLogin());\r\n}\r\n\r\nexport const activateUploadUserAvatar = () => (dispatch) => {\r\n    \r\n    dispatch(activeUploadUserAvatar());\r\n}\r\n\r\nexport const activatePostDetails = (postId) => (dispatch) => {\r\n    dispatch(loadOnePost(postId));\r\n    dispatch(activePostDetails());\r\n}\r\n\r\n","\r\nexport const closeAll = (payload) => ({\r\n    type: 'CLOSE_ALL',\r\n    payload\r\n})\r\n\r\nexport const activeRegister = () => ({\r\n    type: 'ACTIVE_REGISTER'\r\n})\r\n\r\nexport const activeLogin = () => ({\r\n    type: 'ACTIVE_LOGIN'\r\n})\r\n\r\nexport const activeUploadPost = () => ({\r\n    type: 'ACTIVE_UPLOAD_POST'\r\n})\r\n\r\nexport const activeUploadUserAvatar = () => ({\r\n    type: 'ACTIVE_UPLOAD_USER_AVATAR'\r\n})\r\n\r\nexport const activePostDetails = () => ({\r\n    type: 'ACTIVE_POST_DETAILS'\r\n})\r\n\r\n\r\n","\r\nexport const sendLog = (user_info) => ({\r\n    type: 'SEND_LOGIN',\r\n    payload: user_info\r\n})\r\n\r\nexport const logOut = () => ({\r\n    type: 'SEND_LOGOUT'\r\n})\r\n\r\nexport const setAvatar = (image) => ({\r\n    type: 'SET_AVATAR',\r\n    payload: image\r\n})\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { MoreHoriz } from '@material-ui/icons';\r\nimport Logo from '../theme/Logo';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { activateLogin, activateRegister, activateUploadPost, activateUploadUserAvatar } from '../store/modals/operations';\r\nimport { checkUser, sendLogOut } from '../store/user/operations';\r\nimport { Avatar } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Header() {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        dispatch(checkUser())\r\n      }, [dispatch]);\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    \r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const goLog = () => {\r\n        setAnchorEl(null);\r\n        dispatch(activateLogin())\r\n    }\r\n\r\n    const goReg = () => {\r\n        setAnchorEl(null);\r\n        dispatch(activateRegister())\r\n    }\r\n\r\n    const goUploadPost = () => {\r\n        setAnchorEl(null);\r\n        dispatch(activateUploadPost())\r\n    }\r\n\r\n    const goLogOut = () => {\r\n        setAnchorEl(null);\r\n        dispatch(sendLogOut())\r\n    }\r\n\r\n    const goUploadUserAvatar = () => {\r\n        setAnchorEl(null);\r\n        dispatch(activateUploadUserAvatar())\r\n    }\r\n\r\n    \r\n\r\n    const isLogin = useSelector(st => st.user.isLogin)\r\n    const user_info = useSelector(st => st.user.user_info)\r\n    \r\n\r\n    return (\r\n        <header>\r\n            <Link to=\"/\" ><Logo></Logo></Link>\r\n            \r\n            <div className=\"header-nav-info\">\r\n                {isLogin &&\r\n                <>  \r\n                    <Link to={'/user/' + user_info._id} >\r\n                        <Avatar\r\n                            aria-label=\"recipe\" \r\n                            src={user_info.image}\r\n                            className=\"avatar\"\r\n                        >\r\n                            {user_info.nickname[0]}\r\n                        </Avatar>\r\n                    </Link>\r\n                    <Menu\r\n                        id=\"simple-menu\"\r\n                        anchorEl={anchorEl}\r\n                        keepMounted\r\n                        open={!!anchorEl}\r\n                        onClose={handleClose}\r\n                    >\r\n                        <MenuItem onClick={goUploadUserAvatar}>Поменять аватар</MenuItem>\r\n                        <MenuItem onClick={goUploadPost}>Загрузить пост</MenuItem>\r\n                        <MenuItem onClick={goLogOut}>Выйти</MenuItem>\r\n                    </Menu>  \r\n                </>\r\n                }\r\n                {!isLogin &&\r\n                <Menu\r\n                    id=\"simple-menu\"\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={!!anchorEl}\r\n                    onClose={handleClose}\r\n                >\r\n                    <MenuItem onClick={goLog}>Войти</MenuItem>\r\n                    <MenuItem onClick={goReg}>Зарегистрироваться</MenuItem>\r\n                </Menu>   \r\n                }\r\n                <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n                    <MoreHoriz></MoreHoriz>\r\n                </Button>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n\r\n\r\n\r\n","import axios from 'axios';\r\nimport alertify from 'alertifyjs';\r\nimport { sendLog, logOut, setAvatar } from './actions';\r\nimport { closeAllModals } from '../modals/operations';\r\nimport { deletePosts } from '../posts/actions';\r\nimport { clearSubs } from '../subs/actions';\r\n\r\n\r\nexport const checkUser = () => (dispatch, getState) => {\r\n\r\n    const {isAuth} = getState().user\r\n\r\n    if (isAuth) {\r\n        axios.post(\"/auth/check\", {withCredentials: true}).then((res) => {\r\n\r\n\r\n            if (!!res.data) {\r\n                dispatch(sendLog(res.data['user']));\r\n            }else{\r\n                dispatch(logOut())\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const sendSettingImage = (file) => (dispatch, getState) => {\r\n\r\n    const {isLogin} = getState().user\r\n\r\n    if (!isLogin) {\r\n        alertify.error('Вы не вошли в аккаунт!');\r\n\r\n    }else{\r\n\r\n        let formData = new FormData();\r\n        formData.append(\"image_upload\", file);\r\n\r\n        axios.post(\"/users/image/set\", formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data;boundary=1'\r\n            }\r\n        }).then((res) => {\r\n\r\n            if (!!res.data && !!res.data['success'] && !!res.data['image']) {\r\n                alertify.success(res.data['success'])\r\n                dispatch(setAvatar(res.data['image']))\r\n                dispatch(closeAllModals())  \r\n            }\r\n\r\n        });\r\n    }\r\n}\r\n\r\nexport const sendLogOut = () => (dispatch) => {\r\n\r\n    axios.post(\"/auth/logout\").then(() => {\r\n\r\n        dispatch(logOut())\r\n        dispatch(deletePosts())\r\n        dispatch(clearSubs())\r\n    });\r\n}\r\n\r\nexport const sendRegister = ({values, setError}) => (dispatch) => {\r\n\r\n    axios.post(\"/auth/register\", {...values}).then((res) => {\r\n        \r\n        if (!!res.data['error']) {\r\n\r\n            for (const key in res.data['error']) {\r\n                setError(key, res.data['error'][key])\r\n                alertify.error(res.data['error'][key]);\r\n            }\r\n            \r\n        }\r\n\r\n        if (!!res.data['success']) {\r\n            dispatch(closeAllModals())\r\n            alertify.success(res.data['success']);\r\n            \r\n        }\r\n    });\r\n}\r\n\r\nexport const sendLogin = ({values, setError}) => (dispatch) => {\r\n\r\n    axios.post(\"/auth/login\", {...values}).then((res) => {\r\n        \r\n        \r\n        if (!!res.data['error']) {\r\n\r\n            for (const key in res.data['error']) {\r\n                setError(key, res.data['error'][key])\r\n                alertify.error(res.data['error'][key]);\r\n            }\r\n            \r\n        }\r\n\r\n        if (!!res.data['success']) {\r\n            dispatch(closeAllModals())    \r\n            dispatch(sendLog(res.data['user']));\r\n            alertify.success(res.data['success']);\r\n            dispatch(deletePosts())\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n","\r\nexport const getRecomendSubs = (payload) => ({\r\n    type: 'GET_RECOMEND_SUBS',\r\n    payload\r\n})\r\n\r\nexport const saveSubs = (payload) => ({\r\n    type: 'SAVE_SUBS',\r\n    payload\r\n})\r\n\r\nexport const clearSubs = () => ({\r\n    type: 'CLEAR_SUBS'\r\n})\r\n\r\n\r\n\r\n\r\n","\r\nexport const phoneRegExp = /^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/;\r\nexport const emailRegExp = /\\S+@\\S+\\.\\S+/;","import * as yup from 'yup';\r\nimport { emailRegExp } from '../reg-exp';\r\n\r\nconst FIELD_REQUIRED = 'Поле не должно быть пустым';\r\n\r\nconst schema = yup.object().shape({\r\n    nickname: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED)\r\n      .min(3, 'У никнейма должно быть минимум 3 символа')\r\n      .max(20, 'У никнейма должно быть максимум 20 символов'),\r\n    email: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED)\r\n      .matches(emailRegExp, 'Введенный Email не корректный!'),\r\n    password: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED),\r\n    repeat: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED)\r\n      .oneOf([yup.ref(\"password\"), null], \"Пароли не совпадают!\")\r\n});\r\n  \r\nexport default schema;","import React from 'react'\r\nimport { useField } from 'formik';\r\nimport { TextField } from '@material-ui/core';\r\n\r\nfunction Input(props) {\r\n  const { label, name, classes, ...rest } = props;\r\n\r\n  const [field, meta] = useField(name);\r\n\r\n  return (\r\n    <>\r\n      <TextField\r\n          id=\"outlined-password-input\"\r\n          error={meta.touched && !!meta.error}\r\n          label={label}\r\n          name={name}\r\n          helperText={meta.touched && meta.error}\r\n          className={classes}\r\n          {...field} \r\n          {...rest}\r\n        />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Input\r\n","\r\n\r\nimport React from 'react';\r\nimport {Form, withFormik} from \"formik\";\r\nimport schema from \"../validation/register/schema\";\r\nimport { Button, Paper } from '@material-ui/core';\r\nimport Input from '../components/Input';\r\nimport { connect } from 'react-redux';\r\nimport { sendRegister } from '../store/user/operations';\r\n\r\nfunction RegisterForm() {\r\n\r\n\r\n    return (\r\n        \r\n        <Paper>\r\n            <Form noValidate autoComplete=\"off\" className=\"modal-form\">\r\n                <h3 className=\"modal-form-title\">Регистрация</h3>   \r\n                <Input label=\"Ваш никнейм\" name=\"nickname\" type=\"text\" />\r\n                <Input label=\"Ваш email\" name=\"email\" type=\"text\" />\r\n                <Input label=\"Ваш пароль\" name=\"password\" type=\"password\" />\r\n                <Input label=\"Повторите пароль\" name=\"repeat\" type=\"password\" />\r\n                <Button color=\"primary\" type=\"submit\">\r\n                    Отправить\r\n                </Button>\r\n            </Form>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        sendReg: values => dispatch(sendRegister(values))\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withFormik({\r\n    mapPropsToValues: () => ({\r\n        nickname: '',\r\n        email: '',\r\n        password: '',\r\n        repeat: ''\r\n    }),\r\n    handleSubmit: (values, {props, setFieldError}) => {\r\n        const sendData = {\r\n            values,\r\n            setError: setFieldError\r\n        }\r\n        \r\n        props.sendReg(sendData);\r\n        \r\n   \r\n    },\r\n    validationSchema: schema\r\n  })(RegisterForm));","import * as yup from 'yup';\r\nimport { emailRegExp } from '../reg-exp';\r\n\r\nconst FIELD_REQUIRED = 'Поле не должно быть пустым';\r\n\r\nconst schema = yup.object().shape({\r\n    email: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED)\r\n      .matches(emailRegExp, 'Введенный Email не корректный!'),\r\n    password: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED),\r\n});\r\n  \r\nexport default schema;","\r\n\r\nimport React from 'react';\r\nimport {Form, withFormik} from \"formik\";\r\nimport schema from \"../validation/login/schema\";\r\nimport { Button, Paper } from '@material-ui/core';\r\nimport Input from '../components/Input';\r\nimport { connect } from 'react-redux';\r\nimport { sendLogin } from '../store/user/operations';\r\n\r\nfunction LoginForm() {\r\n\r\n\r\n    return (\r\n        \r\n    <Paper>          \r\n        <Form noValidate autoComplete=\"off\" className=\"modal-form\">\r\n            <h3 className=\"modal-form-title\">Авторизация</h3>   \r\n            <Input label=\"Ваш email\" name=\"email\" type=\"text\" />\r\n            <Input label=\"Ваш пароль\" name=\"password\" type=\"password\" />\r\n            <Button color=\"primary\" type=\"submit\">\r\n                Отправить\r\n            </Button>\r\n        </Form>\r\n    </Paper>\r\n        \r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        sendLog: values => dispatch(sendLogin(values))\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withFormik({\r\n    mapPropsToValues: () => ({\r\n        email: '',\r\n        password: '',\r\n    }),\r\n    handleSubmit: (values, {props, setFieldError}) => {\r\n    \r\n        const sendData = {\r\n            values,\r\n            setError: setFieldError\r\n        }\r\n        props.sendLog(sendData);\r\n        \r\n    },\r\n    validationSchema: schema\r\n  })(LoginForm));","\r\n\r\nimport React, { useRef, useState } from 'react';\r\nimport { Button, Paper } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Send, CloudUpload } from '@material-ui/icons';\r\nimport { uploadImage } from '../store/posts/operations';\r\n\r\nfunction UploadPost() {\r\n\r\n    const isLogin = useSelector(st => st.user.isLogin)\r\n\r\n    const [file, setFile] = useState(null);\r\n    const [image, setImage] = useState(null);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const fileInput = useRef(null);\r\n\r\n\r\n    const onFileChange = (e) => { \r\n     \r\n      const img_src = window.URL.createObjectURL(e.target.files[0]);\r\n      setFile(e.target.files[0]); \r\n      setImage(img_src)\r\n\r\n    }; \r\n\r\n    const handleOpenFileInput = () => {\r\n      fileInput.current.click();\r\n    };\r\n\r\n    \r\n\r\n    const handleUploadImage = () => {\r\n      dispatch(uploadImage(file));\r\n      setFile(null); \r\n      setImage(null)\r\n    };\r\n\r\n    if (!isLogin) {\r\n      return 'Error';\r\n    }\r\n\r\n\r\n    return (\r\n        <Paper>\r\n            <h3 className=\"modal-form-title\">Загрузить пост!</h3>\r\n            <div className=\"modal-form-post\"> \r\n\r\n                <Button\r\n                    onClick={handleOpenFileInput}\r\n                    variant=\"contained\"\r\n                    color=\"default\"\r\n                    startIcon={<CloudUpload />}\r\n                  >\r\n                    Загрузить\r\n                </Button>\r\n                <input ref={fileInput} style={{display: 'none'}} name=\"upload_post\" id=\"upload_post\" type=\"file\" onChange={onFileChange} /> \r\n\r\n                \r\n                \r\n                {image && \r\n                file && \r\n                <div className=\"modal-form-post__preview\">  \r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<Send />}\r\n                    onClick={handleUploadImage}\r\n                  >\r\n                    Выставить пост!\r\n                  </Button>\r\n                  <hr />\r\n                  <h4>Предварительный просмотр!</h4>\r\n                  <img src={image} alt={file.name} />\r\n                </div>}\r\n            </div> \r\n        </Paper>\r\n    );\r\n}\r\n\r\n\r\nexport default UploadPost;","\r\n\r\nimport React, { useRef, useState } from 'react';\r\nimport { Button, Paper } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Send, CloudUpload } from '@material-ui/icons';\r\nimport { sendSettingImage } from '../store/user/operations';\r\n\r\nfunction UploadUserAvatar() {\r\n\r\n    const isLogin = useSelector(st => st.user.isLogin)\r\n\r\n    const [file, setFile] = useState(null);\r\n    const [image, setImage] = useState(null);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const fileInput = useRef(null);\r\n\r\n\r\n    const onFileChange = (e) => { \r\n     \r\n      const img_src = window.URL.createObjectURL(e.target.files[0]);\r\n      setFile(e.target.files[0]); \r\n      setImage(img_src)\r\n\r\n    }; \r\n\r\n    const handleOpenFileInput = () => {\r\n      fileInput.current.click();\r\n    };\r\n\r\n    \r\n\r\n    const handleUploadImage = () => {\r\n\r\n      dispatch(sendSettingImage(file));\r\n      setFile(null); \r\n      setImage(null)\r\n    };\r\n\r\n    if (!isLogin) {\r\n      return 'Error';\r\n    }\r\n\r\n\r\n    return (\r\n        <Paper>\r\n            <h3 className=\"modal-form-title\">Загрузить аватар!</h3>\r\n            <div className=\"modal-form-post\"> \r\n\r\n                <Button\r\n                    onClick={handleOpenFileInput}\r\n                    variant=\"contained\"\r\n                    color=\"default\"\r\n                    startIcon={<CloudUpload />}\r\n                  >\r\n                    Загрузить\r\n                </Button>\r\n                <input ref={fileInput} style={{display: 'none'}} name=\"upload_post\" id=\"upload_post\" type=\"file\" onChange={onFileChange} /> \r\n\r\n                \r\n                \r\n                {image && \r\n                file && \r\n                <div className=\"modal-form-post__preview\">  \r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<Send />}\r\n                    onClick={handleUploadImage}\r\n                  >\r\n                    Поменять аватар!\r\n                  </Button>\r\n                  <hr />\r\n                  <h4>Предварительный просмотр!</h4>\r\n                  <img src={image} alt={file.name} />\r\n                </div>}\r\n            </div> \r\n        </Paper>\r\n    );\r\n}\r\n\r\n\r\nexport default UploadUserAvatar;","import * as yup from 'yup';\r\n\r\nconst FIELD_REQUIRED = 'Комментарий не должен быть пустым';\r\n\r\nconst schema = yup.object().shape({\r\n    add_comment: yup\r\n      .string()\r\n      .required(FIELD_REQUIRED)\r\n      .min(1, 'Комментарий не должен быть пустым'),\r\n});\r\n  \r\nexport default schema;","import React, { useRef, useState, useEffect } from 'react';\r\nimport {Form, withFormik} from \"formik\";\r\nimport schema from \"../validation/comments/schema\";\r\nimport { Button } from '@material-ui/core';\r\nimport Input from '../components/Input';\r\nimport { connect, useDispatch } from 'react-redux';\r\nimport { commentPost, getComments } from '../store/posts/operations';\r\n\r\n\r\nfunction Comments({lastComments, postId, isAllComments, scroll}) {\r\n\r\n    const [isloadAllComments, setIsLoadAllComments] = useState(isAllComments);\r\n    const dispatch = useDispatch();\r\n    const commentsRow = useRef(null);\r\n\r\n    const loadAllComments = () => {\r\n        setIsLoadAllComments(true);\r\n        dispatch(getComments(postId))\r\n    }\r\n\r\n    useEffect(\r\n        () => {\r\n            if (scroll) {\r\n                const scrollComments = commentsRow.current\r\n                \r\n                scrollComments.scrollTop = scrollComments.scrollHeight;\r\n            }\r\n        },[scroll]\r\n    );\r\n\r\n    let comments = false;\r\n\r\n    if (!!lastComments) {\r\n        comments = lastComments.map(e => {\r\n            return (\r\n                <div className=\"comments-comment\" key={e.id}>\r\n                    <span className=\"comments-comment--name\">{e.name}</span>\r\n                    <span className=\"comments-comment--comment\">{e.comment}</span>\r\n                </div>\r\n            )\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <section className=\"comments\">\r\n            {!!comments.length && !isloadAllComments && <span onClick={loadAllComments} className=\"comments-loader\" >Загрузить все комментарии</span>}\r\n            {!comments.length && <p className=\"comments-empty\">Комментариев нету!</p>}\r\n            <div className=\"comments_users\" ref={commentsRow}>\r\n                {comments}\r\n            </div>\r\n            <Form noValidate autoComplete=\"off\" className=\"comments-form\">\r\n                <Input label=\"Добавить комментарий\" name=\"add_comment\" type=\"text\" classes=\"comments-form__comment\" />\r\n                <Button color=\"primary\" type=\"submit\">\r\n                    Отправить\r\n                </Button>\r\n            </Form>\r\n        </section>\r\n    );\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        sendComment: (postId, comment) => dispatch(commentPost(postId, comment))\r\n    }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(withFormik({\r\n    mapPropsToValues: () => ({\r\n        add_comment: ''\r\n    }),\r\n    handleSubmit: (values, {props, resetForm}) => {\r\n\r\n\r\n        const sendData = {\r\n            postId: props.postId,\r\n            comment: values.add_comment,\r\n            resetValue: resetForm\r\n        }\r\n\r\n        props.sendComment(sendData);\r\n    },\r\n    validationSchema: schema\r\n})(Comments));","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport Moment from 'moment';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { likePost } from '../store/posts/operations';\r\nimport { Link } from 'react-router-dom';\r\nrequire('moment/locale/ru');\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  '@keyframes likeOnBg-anim': {  \r\n    '0%': {\r\n      opacity: 0,\r\n      transform: 'translate(-50%, -50%) scale(1)'\r\n    },\r\n    '100%': {\r\n      opacity: 1,\r\n      transform: 'translate(-50%, -50%) scale(3)'\r\n    },\r\n  },\r\n  card: {\r\n    marginBottom: '20px'\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '100%',\r\n    cursor: 'pointer'\r\n  },\r\n  like: {\r\n    transition: '.3s'\r\n  },\r\n  likeOnBg: {\r\n    transition: '.2s',\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%) scale(1)',\r\n    pointerEvents: 'none',\r\n    color: '#ff3b3bc2',\r\n    opacity: 0,\r\n  },\r\n  likeOnBgActive: {\r\n    animation: '$likeOnBg-anim 200ms linear',\r\n    transform: 'translate(-50%, -50%) scale(3)',\r\n    opacity: 1\r\n  },\r\n  likeActive: {\r\n    color: '#ff3b3b'\r\n  },\r\n  content: {\r\n    padding: 0,\r\n    position: 'relative'\r\n  },\r\n  formodal: {\r\n    flex: 1,\r\n    alignItems: 'flex-end'\r\n  }\r\n}));\r\n\r\nexport default function Post(props) {\r\n\r\n  const {id, likes, image, user, liked, children, date, props_classes} = props\r\n\r\n  \r\n  const formatDate = Moment(date).format('DD MMMM YYYY HH:mm');\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const isLogin = useSelector(st => st.user.isLogin)\r\n\r\n  const [like, setLike] = React.useState(liked);\r\n  const [likeBg, setLikeBg] = React.useState(false);\r\n  const [countLike, setCountLike] = React.useState(likes);\r\n\r\n\r\n  useEffect(() => {\r\n    if (likeBg) {\r\n      const interval = setInterval(() => {\r\n        setLikeBg(false);\r\n      }, 1500);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [likeBg]);\r\n\r\n  \r\n\r\n\r\n  const addToLike = () => {\r\n    if (isLogin) {\r\n      if (like !== true) {\r\n        togglecountLike(like, true);\r\n      }\r\n      setLike(true);\r\n      setLikeBg(true);\r\n    }\r\n    \r\n  };\r\n\r\n  const togglecountLike = (like) => {\r\n    if (isLogin) {\r\n      if (!like) {\r\n        setCountLike(countLike + 1);\r\n      }else{\r\n        setCountLike(countLike - 1);\r\n      }\r\n    }\r\n    \r\n    dispatch(likePost(id, !like));\r\n    \r\n\r\n  }\r\n\r\n  const addToLikeToggle = () => {\r\n    if (isLogin) {\r\n      setLike(!like);\r\n    }\r\n    togglecountLike(like);\r\n  };\r\n\r\n  const avatar = <Avatar\r\n                    aria-label=\"recipe\" \r\n                    src={user.image}\r\n                    className=\"avatar\"\r\n                  >\r\n                    {user.nickname[0]}\r\n                  </Avatar>;\r\n  let avatarComponent = false;\r\n\r\n  if (isLogin) {\r\n    avatarComponent = <Link to={\"/user/\" + user.id}>{avatar}</Link>\r\n  }\r\n\r\n\r\n  return (\r\n    <Card className={[classes.card, props_classes].join(' ')}>\r\n      <div className={classes.formodal}>\r\n        <CardHeader\r\n          avatar={avatarComponent || avatar}\r\n          title={user.nickname}\r\n          subheader={formatDate}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <CardMedia\r\n            className={classes.media}\r\n            onDoubleClick={addToLike}\r\n            image={image}\r\n          />\r\n          <IconButton\r\n            className={clsx(classes.likeOnBg, {\r\n              [classes.likeOnBgActive]: likeBg,\r\n            })}\r\n          >\r\n            <FavoriteIcon />\r\n          </IconButton>\r\n        </CardContent>\r\n        <CardActions disableSpacing>\r\n        <IconButton \r\n          aria-label=\"add to favorites\"\r\n          className={clsx(classes.like, {\r\n            [classes.likeActive]: like,\r\n          })}\r\n          onClick={addToLikeToggle}\r\n          aria-expanded={like}\r\n        >\r\n          <FavoriteIcon />\r\n        </IconButton>\r\n        <span>{countLike} отметок \"Нравится\"</span>\r\n      </CardActions>\r\n      </div>\r\n      <CardActions className={classes.formodal} disableSpacing>\r\n          {children}\r\n      </CardActions>\r\n\r\n    </Card>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { loaderSvg } from '../theme/loader.jsx';\r\n\r\nfunction Loader() {\r\n    return (\r\n        <div className=\"loader\">\r\n            {loaderSvg()}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Loader;","export const loaderSvg = () => {\r\n  return(\r\n    <svg viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n      <circle cx=\"50\" cy=\"50\" r=\"32\" strokeWidth=\"8\" stroke=\"#000000\" strokeDasharray=\"50.26548245743669 50.26548245743669\" fill=\"none\" strokeLinecap=\"round\">\r\n        <animateTransform attributeName=\"transform\" type=\"rotate\" dur=\"1s\" repeatCount=\"indefinite\" keyTimes=\"0;1\" values=\"0 50 50;360 50 50\"></animateTransform>\r\n      </circle>\r\n      <circle cx=\"50\" cy=\"50\" r=\"23\" strokeWidth=\"8\" stroke=\"#d0d0d0\" strokeDasharray=\"36.12831551628262 36.12831551628262\" strokeDashoffset=\"36.12831551628262\" fill=\"none\" strokeLinecap=\"round\">\r\n        <animateTransform attributeName=\"transform\" type=\"rotate\" dur=\"1s\" repeatCount=\"indefinite\" keyTimes=\"0;1\" values=\"0 50 50;-360 50 50\"></animateTransform>\r\n      </circle>\r\n    </svg>\r\n  )\r\n\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Comments from '../components/Comments';\r\nimport Post from '../components/Post';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Loader from '../components/Loader';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    wrap: {\r\n        display: 'flex',\r\n        [theme.breakpoints.down('620')]: {\r\n            flexDirection: 'column',\r\n        }\r\n    },\r\n    wrapComments: {\r\n        display: 'block',\r\n        [theme.breakpoints.down('620')]: {\r\n            display: 'none',\r\n        }\r\n    }\r\n}));\r\n\r\nfunction PostDetails() {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const postDetails = useSelector(st => st.posts.activePostDetails);\r\n    const classes = useStyles();\r\n\r\n\r\n    useEffect(() => {\r\n        if (postDetails) {\r\n            setIsLoading(false);\r\n        }\r\n    }, [postDetails]);\r\n\r\n    if (isLoading) {\r\n        return <Loader />\r\n    }\r\n\r\n    return (\r\n        <Post {...postDetails} props_classes={classes.wrap}> \r\n            <div className={classes.wrapComments}>\r\n                <Comments scroll postId={postDetails.id} lastComments={postDetails.lastComments} isAllComments={true} />\r\n            </div>\r\n        </Post>\r\n    );\r\n}\r\n\r\nexport default PostDetails;","import React, { memo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport RegisterForm from './RegisterForm';\r\nimport LoginForm from './LoginForm';\r\nimport UploadPost from './UploadPost';\r\nimport UploadUserAvatar from './UploadUserAvatar';\r\nimport { Modal, Paper } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { closeAllModals } from '../store/modals/operations';\r\nimport PostDetails from './PostDetails';\r\nimport { delActivatePost } from '../store/posts/actions';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        position: 'absolute',\r\n        background: 'linear-gradient(135deg, #000 50%, #fff 50%)',\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(2, 4, 3),\r\n        width: '100%',\r\n        top: `50%`,\r\n        left: `50%`,\r\n        transform: `translate(-50%, -50%)`,\r\n    },\r\n}));\r\n\r\nfunction Modals() {\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const modalsActive = useSelector(st => st.modals.active)\r\n    const register = useSelector(st => st.modals.register)\r\n    const login = useSelector(st => st.modals.login)\r\n    const uploadPost = useSelector(st => st.modals.uploadPost)\r\n    const uploadUserAvatar = useSelector(st => st.modals.uploadUserAvatar)\r\n    const postDetails = useSelector(st => st.modals.postDetails)\r\n    const classes = useStyles();\r\n    const styles = {}\r\n    styles.maxWidth = 400\r\n\r\n    if (postDetails) {\r\n        styles.maxWidth = 1000;\r\n        styles.maxHeight = 660;\r\n    }\r\n\r\n    const handleClose = (delPost) => {\r\n        \r\n        dispatch(closeAllModals())\r\n        if (delPost) {\r\n            dispatch(delActivatePost())\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <Modal\r\n            open={modalsActive}\r\n            onClose={() => handleClose(postDetails)}\r\n        >\r\n            <Paper className={classes.paper} style={{...styles}}>\r\n                <section className=\"modal\">\r\n                    <span className=\"modal__close\" onClick={handleClose}></span>\r\n                    {register && <RegisterForm />}\r\n                    {login && <LoginForm />}\r\n                    {uploadPost && <UploadPost />}\r\n                    {uploadUserAvatar && <UploadUserAvatar />}\r\n                    {postDetails && <PostDetails />}\r\n                </section>\r\n            </Paper>\r\n        </Modal>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default memo(Modals);","import alertify from 'alertifyjs';\r\nimport axios from 'axios';\r\nimport { getRecomendSubs, saveSubs } from './actions';\r\n\r\nexport const getRecomends = () => (dispatch, getState) => {\r\n\r\n    const {isLogin} = getState().user\r\n\r\n\r\n    if (isLogin) {\r\n        axios.post(\"/subs/recomends\").then((res) => {\r\n\r\n            if (!!res.data && !!res.data['subs']) {\r\n                dispatch(getRecomendSubs(res.data['subs']))\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const getSubs = () => (dispatch, getState) => {\r\n\r\n    const {isLogin} = getState().user\r\n\r\n\r\n    if (isLogin) {\r\n        axios.post(\"/subs/get\").then((res) => {\r\n\r\n            if (!!res.data && !!res.data['subs']) {\r\n                dispatch(saveSubs(res.data['subs']))\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport const subscribeAction = (userId, isSub, setSub) => (dispatch, getState) => {\r\n\r\n    const {isLogin} = getState().user\r\n\r\n    const subAction = isSub ? 'unsub' : 'sub'\r\n\r\n\r\n    if (isLogin && userId) {\r\n        axios.post(`/subs/action/${subAction}`, {userId}).then((res) => {\r\n            if (!!res.data) {\r\n                if (!!res.data['error']) {\r\n                    alertify.error(res.data['error'])\r\n                }\r\n                if (!!res.data['sub']) {\r\n                    setSub(!isSub)\r\n                }\r\n            }\r\n            \r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { useState } from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport RemoveCircleOutlineOutlinedIcon from '@material-ui/icons/RemoveCircleOutlineOutlined';\r\nimport { useDispatch } from 'react-redux';\r\nimport { subscribeAction } from '../store/subs/operations';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    button: {\r\n        minWidth: 'inherit'\r\n    },\r\n    link: {\r\n      width: '100%',\r\n      display: 'flex',\r\n      alignItems: 'center'\r\n    }\r\n}));\r\n\r\nconst Sub = ({image, nickname, togglePoint, _id, isSubs}) => {\r\n\r\n    const [isSub, setIsSub] = useState(isSubs || false);\r\n    const classes = useStyles();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    \r\n    let textSub,\r\n    iconSub\r\n\r\n    if (!isSub) {\r\n      textSub = 'Подписаться'\r\n      iconSub = <AddCircleOutlineIcon />\r\n    }else{\r\n      textSub = 'Отписаться'\r\n      iconSub = <RemoveCircleOutlineOutlinedIcon />\r\n    }\r\n\r\n    const subAction = () => {\r\n      dispatch(subscribeAction(_id, isSub, setIsSub))\r\n    }\r\n\r\n    return ( \r\n      \r\n        <ListItem button>\r\n          <Link className={classes.link} to={`/user/${_id}`}>\r\n            <ListItemAvatar>\r\n            <Avatar\r\n                aria-label=\"recipe\" \r\n                src={image}\r\n                className=\"avatar\"\r\n            >\r\n              {nickname[0]}\r\n            </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText primary={nickname} />\r\n          </Link>\r\n            <ListItemSecondaryAction>\r\n            <Button \r\n                onClick={subAction}\r\n                variant=\"contained\" \r\n                className={classes.button} \r\n                color=\"secondary\">\r\n              {!togglePoint && textSub}\r\n              {togglePoint && iconSub}\r\n            </Button>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n     );\r\n}\r\n \r\nexport default Sub;","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport { Typography } from '@material-ui/core';\r\nimport { getSubs } from '../store/subs/operations';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Loader from './Loader';\r\nimport Sub from './Sub';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '1px solid #000',\r\n    marginBottom: '5px',\r\n    maxHeight: '140px',\r\n    overflowX: 'auto'\r\n  },\r\n}));\r\n\r\nfunction SubsList({togglePoint}) {\r\n\r\n  \r\n\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const user_subs = useSelector(st => st.subs.user_subs)\r\n  const isLoading = useSelector(st => st.subs.isLoadingSub)\r\n  const isLogin = useSelector(st => st.user.isLogin)\r\n\r\n\r\n  useEffect(() => {\r\n    if (!user_subs.length && isLoading) {\r\n      dispatch(getSubs())\r\n    }\r\n  }, [dispatch, user_subs, isLoading, isLogin]);\r\n\r\n  \r\n\r\n  const mySubs = user_subs.map((value) => (\r\n    <Sub key={value._id} isSubs={true} togglePoint={togglePoint} {...value} />\r\n  ))\r\n  \r\n\r\n  if (!user_subs.length && isLoading) {\r\n    return <Loader />\r\n  }\r\n\r\n\r\n\r\nreturn (\r\n  <>\r\n      <Typography variant=\"h6\">\r\n          Ваши подписки:\r\n      </Typography>\r\n      <List dense className={classes.root}>\r\n        {mySubs}\r\n        {!isLoading && !user_subs.length && <p className=\"center\">Вы нинакого не подписаны :(</p>}\r\n      </List>\r\n  </>\r\n);\r\n}\r\n\r\nexport default SubsList;","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport { Typography } from '@material-ui/core';\r\nimport { getRecomends } from '../store/subs/operations';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Loader from './Loader'\r\nimport Sub from './Sub';\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '1px solid #000',\r\n    marginBottom: '5px',\r\n    maxHeight: '140px',\r\n    overflowX: 'auto'\r\n  },\r\n}));\r\n\r\nfunction RecSubsList({togglePoint}) {\r\n  const classes = useStyles();\r\n  \r\n  const dispatch = useDispatch();\r\n\r\n  \r\n  const recomends_subs = useSelector(st => st.subs.recomends_subs)\r\n  const isLoading = useSelector(st => st.subs.isLoadingRec)\r\n  const isLogin = useSelector(st => st.user.isLogin)\r\n\r\n  \r\n  useEffect(() => {\r\n    if (!recomends_subs.length && isLoading) {\r\n      dispatch(getRecomends())\r\n    }\r\n  }, [dispatch, recomends_subs, isLoading, isLogin]);\r\n\r\n\r\n\r\n\r\n  const subsRecomend = recomends_subs.map((value) => (\r\n    <Sub key={value._id} togglePoint={togglePoint} {...value} />\r\n  ))\r\n  \r\n\r\n\r\n  if (!recomends_subs.length && isLoading) {\r\n    return <Loader />\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    {!isLoading && !!recomends_subs.length &&\r\n      <>\r\n        <Typography variant=\"h6\">\r\n          Рекомендуемые:\r\n        </Typography>\r\n        <List dense className={classes.root}>\r\n          {subsRecomend}\r\n        </List> \r\n      </>\r\n    }\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nexport default RecSubsList;","import { useEffect, useState } from 'react';\r\n\r\n\r\nconst useBreakpoint = (queries) => {\r\n    const [queryMatch, setQueryMatch] = useState(null);\r\n  \r\n    useEffect(() => {\r\n      const mediaQueryLists = {};\r\n      const keys = Object.keys(queries);\r\n      \r\n      // To check whether event listener is attached or not\r\n      let isAttached = false;\r\n  \r\n      const handleQueryListener = () => {\r\n        const updatedMatches = keys.reduce((acc, media) => {\r\n          acc[media] = !!(mediaQueryLists[media] && mediaQueryLists[media].matches);\r\n          return acc;\r\n        }, {})\r\n        //Setting state to the updated matches \r\n        // when document either starts or stops matching a query\r\n        setQueryMatch(updatedMatches)\r\n      }\r\n  \r\n      if (window && window.matchMedia) {\r\n        const matches = {};\r\n        keys.forEach(media => {\r\n          if (typeof queries[media] === 'string') {\r\n            mediaQueryLists[media] = window.matchMedia(queries[media]);\r\n            matches[media] = mediaQueryLists[media].matches\r\n          } else {\r\n            matches[media] = false\r\n          }\r\n        });\r\n        //Setting state to initial matching queries\r\n        setQueryMatch(matches);\r\n        isAttached = true;\r\n        keys.forEach(media => {\r\n          if(typeof queries[media] === 'string') {\r\n            mediaQueryLists[media].addListener(handleQueryListener);\r\n          }\r\n        });\r\n      }\r\n  \r\n      return () => {\r\n      //If event listener is attached then remove it when deps change\r\n        if(isAttached) {\r\n          keys.forEach(media => {\r\n            if(typeof queries[media] === 'string') {\r\n              mediaQueryLists[media].removeListener(handleQueryListener);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }, [queries]);\r\n  \r\n    return queryMatch;\r\n}\r\n  \r\n  export default useBreakpoint;","import Post from '../components/Post';\r\nimport React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { loadPosts } from '../store/posts/operations';\r\nimport Loader from '../components/Loader';\r\nimport SubsList from '../components/SubsList';\r\nimport RecSubsList from '../components/RecSubsList';\r\nimport Comments from '../components/Comments';\r\nimport useBreakpoint from '../theme/useBreakpoint';\r\n\r\n\r\n\r\n\r\nfunction HomePosts({queries}) {\r\n\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const posts = useSelector(st => st.posts.posts)\r\n    const hasMore = useSelector(st => st.posts.hasMore)\r\n    const isLogin = useSelector(st => st.user.isLogin)\r\n\r\n\r\n    useEffect(() => {\r\n        if (!posts.length) {\r\n            dispatch(loadPosts())\r\n        }\r\n    }, [posts, dispatch]);\r\n\r\n\r\n    const allPosts = posts.map((e, i) => {\r\n        return (\r\n            <Post key={e.id}  {...posts[i]}>\r\n                <Comments lastComments={e.lastComment} postId={e.id}></Comments>\r\n            </Post>\r\n        )\r\n    })\r\n\r\n\r\n    const matchPoints = useBreakpoint(queries);\r\n\r\n    return (\r\n        <section className=\"home-container\">\r\n            <div className={`posts${!isLogin ? '-max' : ''}`}>\r\n                <InfiniteScroll\r\n                    dataLength={posts.length}\r\n                    next={() => dispatch(loadPosts())}\r\n                    hasMore={hasMore}\r\n                    endMessage={<p className=\"center\">Постов нету :(</p>}\r\n                    loader={<Loader/>}\r\n                >\r\n                    {allPosts}\r\n                </InfiniteScroll>\r\n            </div>\r\n            {isLogin &&\r\n                <div className=\"subs\">\r\n                    <SubsList togglePoint={!!matchPoints && matchPoints.toggle} />\r\n                    <RecSubsList togglePoint={!!matchPoints && matchPoints.toggle} />\r\n                </div>\r\n            }\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default HomePosts;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 'auto'\r\n  },\r\n}));\r\n\r\nfunction GridListPhoto(props) {\r\n    const classes = useStyles();\r\n\r\n\r\n    return (\r\n        <GridListTile {...props} style={{...props.style, height: 'auto', padding: '5px'}} className={classes.root}>\r\n        </GridListTile>\r\n    );\r\n}\r\n\r\n\r\nexport default GridListPhoto;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GridList from '@material-ui/core/GridList';\r\nimport ChatBubbleIcon from '@material-ui/icons/ChatBubble';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\n\r\nimport axios from 'axios';\r\nimport alertify from 'alertifyjs';\r\nimport Loader from './Loader';\r\nimport GridListPhoto from './GridListPhoto';\r\nimport { useDispatch } from 'react-redux';\r\nimport { activatePostDetails } from '../store/modals/operations';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-around',\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  img: {\r\n    width: '100%',\r\n    maxHeight: '280px',\r\n    height: '100%'\r\n  },\r\n  list: {\r\n    width: '100%'\r\n  },\r\n  details: {\r\n    position: 'absolute',\r\n    background: '#1a191991',\r\n    zIndex: 1,\r\n    width: '100%',\r\n    height: '100%',\r\n    top: 0,\r\n    left: 0,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    flexDirection: 'column',\r\n    color: '#fff',\r\n    fontSize: '20px',\r\n    transition: '.3s',\r\n    opacity: 0,\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n        opacity: 1,\r\n     },\r\n  }\r\n}));\r\n\r\nfunction BodyGridUser({userId, togglePoint}) {\r\n  const classes = useStyles();\r\n\r\n    const [userPosts, setUserPosts] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n\r\n    const getUserPosts = async (userId) => {\r\n        const res = await axios.post('/users/posts', {userId});\r\n        if (!!res.data) {\r\n            if(!!res.data['error']){\r\n                alertify.error(res.data['error']);\r\n            }\r\n            if(!!res.data['posts']){\r\n                setUserPosts(res.data['posts']);\r\n                setIsLoading(false)\r\n            }\r\n        }\r\n    }\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const getPost = (postId) => {\r\n        dispatch(activatePostDetails(postId));\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUserPosts(userId)\r\n    }, [userId]);\r\n\r\n    if (isLoading) {\r\n        return <Loader />\r\n    }\r\n\r\n    const cols = togglePoint ? 3 : 2;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n        {!!userPosts.length && \r\n        <GridList cols={cols} className={classes.list}>\r\n            {userPosts.map((post) => (\r\n            <GridListPhoto key={post._id} cols={1} onClick={() => getPost(post._id)}>\r\n                <div className={classes.details}>\r\n                    <span>{post.likes}<FavoriteIcon /></span>\r\n                    <span>{post.comments}<ChatBubbleIcon />   </span>              \r\n                </div>\r\n                <img className={classes.img} src={post.image} alt={'Post №' + post._id} />\r\n            </GridListPhoto>\r\n            ))}\r\n        </GridList>\r\n        }\r\n        {!userPosts.length && <h4 className=\"empty\">У пользователя ещё нет постов!</h4>}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default BodyGridUser;","import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\nimport alertify from 'alertifyjs';\r\nimport Loader from './Loader';\r\nimport { Avatar, Button, Typography } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { subscribeAction } from '../store/subs/operations';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    header: {\r\n      width: '100%',\r\n      backgroundColor: theme.palette.background.paper,\r\n      marginBottom: '5px',\r\n      display: 'flex'\r\n    },\r\n    avatar: {\r\n        width: '100px',\r\n        height: '100px',\r\n        fontSize: '40px'\r\n    },\r\n    second: {\r\n        marginLeft: '30px'\r\n    }\r\n}));\r\n\r\n\r\nfunction HeaderUser({userId}) {\r\n\r\n\r\n    const [userInfo, setUserInfo] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isSub, setIsSub] = useState(false);\r\n\r\n    const user_info = useSelector(st => st.user.user_info)\r\n\r\n    const getUserInfo = (userId) => {\r\n        axios.post('/subs/info', {userId}).then((res) => {\r\n            if (!!res.data) {\r\n                if(!!res.data['error']){\r\n                    alertify.error(res.data['error']);\r\n                }\r\n                if(!!res.data['info']){\r\n                    setUserInfo(res.data['info']);\r\n                    setIsSub(res.data['info']['isSub']);\r\n                    setIsLoading(false)\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUserInfo(userId)\r\n    }, [userId]);\r\n\r\n    const {nickname, image} = userInfo\r\n\r\n    const classes = useStyles();\r\n\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const subAction = () => {\r\n        dispatch(subscribeAction(userId, isSub, setIsSub))    \r\n    }\r\n\r\n\r\n    if (isLoading) {\r\n        return <Loader />\r\n    }\r\n\r\n\r\n\r\n    let textSub;\r\n    if (!isSub) {\r\n        textSub = 'Подписаться'\r\n    }else{\r\n        textSub = 'Отписаться'\r\n    }\r\n\r\n  \r\n\r\n\r\n    return (\r\n        <section className={classes.header}> \r\n            <Avatar\r\n                aria-label=\"recipe\" \r\n                src={image}\r\n                className={`avatar ${classes.avatar}`}\r\n            >\r\n              {nickname[0]}\r\n            </Avatar>\r\n            <div className={classes.second}>\r\n                <Typography variant=\"h3\">\r\n                    {nickname}\r\n                </Typography>\r\n                {user_info._id !== userId &&\r\n                <Button \r\n                    variant=\"contained\" \r\n                    color=\"secondary\"\r\n                    onClick={subAction}\r\n                >\r\n                    {textSub}\r\n                </Button>\r\n                }\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default HeaderUser;","import React from 'react';\r\nimport BodyGridUser from '../components/BodyGridUser';\r\nimport HeaderUser from '../components/HeaderUser';\r\nimport useBreakpoint from '../theme/useBreakpoint';\r\n\r\n\r\n\r\nfunction UserPage({match, queries}) {\r\n\r\n    const userId = match.params.userId;\r\n    const matchPoints = useBreakpoint(queries);\r\n\r\n\r\n    return (\r\n        <section className=\"user-container\">\r\n            <HeaderUser userId={userId} />\r\n            <BodyGridUser togglePoint={!!matchPoints && matchPoints.toggleCols} userId={userId} />\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default UserPage;","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport HomePosts from './pages/HomePosts';\r\nimport UserPage from './pages/UserPage';\r\n\r\nconst queries = {\r\n  toggle: '(max-width: 930px)', \r\n  toggleCols: '(min-width: 500px)'\r\n}\r\n\r\nconst AppRoutes = () => {\r\n\r\n  const isAuth = useSelector(st => st.user.isAuth);\r\n\r\n\r\n  return (\r\n    <Switch>\r\n        <Route exact path='/'  >\r\n            <HomePosts queries={queries} />\r\n        </Route>\r\n        <Switch>\r\n          <ProtectedRoute authenticated={isAuth} exact path='/user/:userId' render={(rest) => <UserPage {...rest} queries={queries} />} />\r\n        </Switch>\r\n    </Switch>\r\n  )\r\n}\r\n\r\nconst ProtectedRoute = ({ authenticated, ...rest }) => {\r\n  return authenticated ? <Route {...rest} /> : <Redirect to='/' />\r\n}\r\n\r\nexport default AppRoutes","import './index.scss';\r\nimport 'alertifyjs/build/css/alertify.css';\r\nimport { Container } from '@material-ui/core';\r\nimport Header from './components/Header';\r\nimport Modals from './modals';\r\nimport AppRoutes from './AppRoutes';\r\n\r\n\r\n\r\n\r\nconst App = () => {\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Header></Header>\r\n      <AppRoutes></AppRoutes>\r\n      <Modals />\r\n    </Container>\r\n    \r\n  );\r\n}\r\n\r\nexport default App;\r\n","const initialState = {\r\n    posts: [],\r\n    page: 1,\r\n    hasMore: true,\r\n    activePostDetails: null\r\n}\r\n\r\nconst posts = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'LOAD_POSTS':\r\n            return {...state, posts: action.payload, page: state.page + 1}\r\n        case 'UPLOAD_IMAGE':\r\n            return {...state, selectedFile: null}\r\n        case 'SAVE_HAS_MORE':\r\n            return {...state, hasMore: action.payload}\r\n        case 'SAVE_ALL_COMMENTS': \r\n            const refreshCommentsPost = state.posts.map(post => {\r\n                const newPost = {...post}\r\n\r\n                if (newPost.id === action.payload.postId) {\r\n                    newPost.lastComment = action.payload.comments\r\n                }\r\n                return newPost;\r\n            })\r\n            return {...state, posts: refreshCommentsPost}\r\n        case 'SAVE_LAST_COMMENT':\r\n            const refreshPost = state.posts.map(post => {\r\n                const newPost = {...post}\r\n\r\n                if (newPost.id === action.payload.postId) {\r\n                    newPost.lastComment.push(action.payload.newComment)\r\n                }\r\n                return newPost;\r\n            })\r\n            return {...state, posts: refreshPost}\r\n        case 'DELETE_POSTS':\r\n            return {hasMore: true, posts: [], page: 1, activePostDetails: null}\r\n        case 'ACTIVATE_POST':\r\n            return {...state, activePostDetails: action.payload}    \r\n        case 'DEL_ACTIVATE_POST': \r\n            return {...state, activePostDetails: null} \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default posts;\r\n","const initialState = {\r\n    user_info: [],\r\n    isLogin: false,\r\n    isAuth: localStorage.getItem('isAuth') || false\r\n}\r\n\r\nconst user = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SEND_LOGIN':\r\n            const { ...user_info } = action.payload;\r\n            localStorage.setItem('isAuth', true);\r\n            return {\r\n                user_info,\r\n                isLogin: true,\r\n                isAuth: true\r\n            }\r\n        case 'SEND_LOGOUT':\r\n            localStorage.removeItem('isAuth');\r\n            return {user_info: [], isLogin: false, isAuth: false}\r\n        case 'SET_AVATAR':\r\n            return {...state, user_info: {...state.user_info, image: action.payload}}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default user;\r\n","const initialState = {\r\n    active: false,\r\n    login: false,\r\n    register: false,\r\n    uploadPost: false,\r\n    uploadUserAvatar: false,\r\n    postDetails: false\r\n}\r\n\r\nconst modals = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'CLOSE_ALL':\r\n            return {...action.payload}\r\n        case 'ACTIVE_REGISTER':\r\n            return {...state, register: true, active: true}\r\n        case 'ACTIVE_LOGIN':\r\n            return {...state, login: true, active: true}\r\n        case 'ACTIVE_UPLOAD_POST':\r\n            return {...state, uploadPost: true, active: true}\r\n        case 'ACTIVE_UPLOAD_USER_AVATAR':\r\n            return {...state, uploadUserAvatar: true, active: true}\r\n        case 'ACTIVE_POST_DETAILS':\r\n            return {...state, postDetails: true, active: true}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default modals;\r\n","const initialState = {\r\n    recomends_subs: [],\r\n    user_subs: [],\r\n    isLoadingRec: true,\r\n    isLoadingSub: true,\r\n}\r\n\r\nconst subs = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'GET_RECOMEND_SUBS':\r\n            return {...state, recomends_subs: action.payload, isLoadingRec: false}\r\n        case 'SAVE_SUBS':\r\n            return {...state, user_subs: action.payload, isLoadingSub: false}\r\n        case 'CLEAR_SUBS':\r\n            return {...initialState}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default subs;\r\n","import { combineReducers } from 'redux'\r\nimport posts from './posts/reducer'\r\nimport user from './user/reducer'\r\nimport modals from './modals/reducer'\r\nimport subs from './subs/reducer'\r\n\r\nexport default combineReducers({\r\n    posts,\r\n    user,\r\n    modals,\r\n    subs\r\n})","import { applyMiddleware, compose, createStore } from \"redux\";\r\nimport reducer from './reducer';\r\nimport thunk from 'redux-thunk';\r\n\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  compose(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\nimport store from './store/store';\r\n\r\nReactDOM.render(\r\n\r\n    <Provider store={store} >\r\n      <BrowserRouter >\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n ,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}